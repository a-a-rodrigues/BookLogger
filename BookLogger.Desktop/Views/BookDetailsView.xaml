<Page x:Class="BookLogger.Desktop.Views.BookDetailsView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Book Details">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <!-- Main content -->
            <RowDefinition Height="Auto" />
            <!-- User input / buttons -->
        </Grid.RowDefinitions>

        <!-- TOP: Book Cover + Metadata -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <!-- Cover -->
                <ColumnDefinition Width="*"/>
                <!-- Metadata -->
            </Grid.ColumnDefinitions>

            <!-- Book Cover -->
            <Border Grid.Column="0" BorderBrush="Gray" BorderThickness="1" CornerRadius="5"
                    Width="180" Height="280" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Image Source="{Binding SelectedBook.CoverUrl}" Stretch="Uniform"/>
            </Border>

            <!-- Metadata -->
            <StackPanel Grid.Column="1" Margin="20,0,0,0" VerticalAlignment="Center">
                <TextBlock Text="{Binding SelectedBook.Title}" FontSize="20" FontWeight="Bold" Margin="0,0,0,10"/>
                <TextBlock Text="{Binding SelectedBook.Author}" FontSize="16" Margin="0,0,0,5"/>
                <TextBlock Text="{Binding SelectedBook.ISBN, StringFormat='ISBN: {0}'}" FontSize="16" Margin="0,0,0,5"/>
                <TextBlock Text="{Binding SelectedBook.Genre, StringFormat='Genre: {0}'}" FontSize="16" Margin="0,0,0,5"/>
                <TextBlock Text="{Binding SelectedBook.FirstPublishYear, StringFormat='Published: {0}'}" FontSize="16" Margin="0,0,0,5"/>
            </StackPanel>
        </Grid>

        <!-- BOTTOM: User Inputs -->
        <StackPanel Grid.Row="1" Orientation="Vertical">
            <!-- Rating + Date -->
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <!-- Rating label -->
                    <ColumnDefinition Width="100"/>
                    <!-- ComboBox -->
                    <ColumnDefinition Width="20"/>
                    <!-- Spacer -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- Date label -->
                    <ColumnDefinition Width="150"/>
                    <!-- DatePicker -->
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Rating:" VerticalAlignment="Center"/>
                <ComboBox Grid.Column="1" ItemsSource="{Binding RatingOptions}" SelectedItem="{Binding UserRating}" />

                <TextBlock Grid.Column="3" Text="Date Read:" VerticalAlignment="Center" Margin="10,0,5,0"/>
                <DatePicker Grid.Column="4" SelectedDate="{Binding DateRead}" />
            </Grid>

            <!-- Review -->
            <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                <TextBlock Text="Review:"/>
                <TextBox Text="{Binding UserReview}" AcceptsReturn="True" Height="80" TextWrapping="Wrap"/>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Cancel" Width="100" Height="35" Margin="0,0,10,0"
                        Command="{Binding CancelCommand}" />
                <Button Content="Add to Library" Width="150" Height="35"
                        Command="{Binding AddBookCommand}" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Page>
